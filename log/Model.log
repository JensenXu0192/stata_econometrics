
. use "/Users/jensenxu/Desktop/2011Census/nhs2011_pumf.dta"
(Written by R.              )

. 
. *Clean up the data
. *Use WAGES from a tab deliminated file to get rid of scientific notations
. merge 1:1 _n using "/Users/jensenxu/Desktop/2011Census/wages.dta"

    Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                           887,012  (_merge==3)
    -----------------------------------------

. drop WAGES

. rename WAGES_N WAGES

. *Drop unavailable data
. *Drop WAGES = 0 ang 1 for taking log later
. drop if WAGES == 0 | WAGES == 1 | WAGES == 8888888 | WAGES == 9999999 | WAGES == .
(426,659 observations deleted)

. *Take natural log
. gen lnWAGES = log(WAGES)

. 
. *Generate a binary indicator for gender
. gen FEMALE = (SEX == 1)

. tab SEX

        Sex |      Freq.     Percent        Cum.
------------+-----------------------------------
     Female |    224,586       48.79       48.79
       Male |    235,767       51.21      100.00
------------+-----------------------------------
      Total |    460,353      100.00

. label list SEX
SEX:
           1 Female
           2 Male

. *Label the new dummy
. label define femaleLAB 1 "Female" 0 "Male"

. label values FEMALE femaleLAB

. label variable FEMALE "Female"

. 
. *Check if the indicator has been defined correctly
. tab SEX FEMALE                  

           |        Female
       Sex |      Male     Female |     Total
-----------+----------------------+----------
    Female |         0    224,586 |   224,586 
      Male |   235,767          0 |   235,767 
-----------+----------------------+----------
     Total |   235,767    224,586 |   460,353 

. *Do the similar to other variables
. 
. *COW 
. *This is not a variable in the model but needs to be modified for sampling restrction
. *Drop unavailable observations
. drop if COW == 7 | COW == 8
(16,018 observations deleted)

. *Exclude self-employed
. drop if COW != 1
(23,462 observations deleted)

. 
. *AGEGRP
. label list AGEGRP
AGEGRP:
           1 0 to 4 years
           2 5 to 6 years
           3 7 to 9 years
           4 10 to 11 years
           5 12 to 14 years
           6 15 to 17 years
           7 18 to 19 years
           8 20 to 24 years
           9 25 to 29 years
          10 30 to 34 years
          11 35 to 39 years
          12 40 to 44 years
          13 45 to 49 years
          14 50 to 54 years
          15 55 to 59 years
          16 60 to 64 years
          17 65 to 69 years
          18 70 to 74 years
          19 75 to 79 years
          20 80 to 84 years
          21 85 years and over
          22 Not available

. *Drop observations who are under legal working age
. drop if AGEGRP <= 5
(0 observations deleted)

. *Note: WAGES == 0 | 1 overlaps the under working-age population, so we may see "0 obs droped" in this step
. *Drop unavailable observations from AGEGRP
. drop if AGEGRP == 22 | AGEGRP == .
(2,033 observations deleted)

. *Create a numerical variable for age, taking values of the rounded median of AGEGRP
. gen AGE = 16

. replace AGE = 19 if AGEGRP == 7
(15,591 real changes made)

. replace AGE = 22 if AGEGRP == 8
(44,407 real changes made)

. replace AGE = 27 if AGEGRP == 9
(44,917 real changes made)

. replace AGE = 32 if AGEGRP == 10
(43,451 real changes made)

. replace AGE = 37 if AGEGRP == 11
(42,854 real changes made)

. replace AGE = 42 if AGEGRP == 12
(45,171 real changes made)

. replace AGE = 47 if AGEGRP == 13
(51,192 real changes made)

. replace AGE = 52 if AGEGRP == 14
(49,116 real changes made)

. replace AGE = 57 if AGEGRP == 15
(37,892 real changes made)

. replace AGE = 62 if AGEGRP == 16
(22,605 real changes made)

. replace AGE = 67 if AGEGRP == 17
(7,941 real changes made)

. replace AGE = 72 if AGEGRP == 18
(2,198 real changes made)

. replace AGE = 77 if AGEGRP == 19
(695 real changes made)

. replace AGE = 82 if AGEGRP == 20
(138 real changes made)

. replace AGE = 85 if AGEGRP == 21
(37 real changes made)

. label variable AGE "Age"

. 
. *Variables for robustness check
. gen FEM_AGE = FEMALE*AGE

. label variable FEM_AGE "Female*Age"

. gen AGE_2 = AGE^2

. label variable AGE_2 "Age^2"

. gen FEM_AGE_2 = FEMALE*AGE_2

. label variable FEM_AGE_2 "Female*Age^2"

. ************************************************
. *Create a variable for potential experience
. 
. *I plan to use potential experience in my formal model, age will be used for robustness check
. *potential experience = age - years of education - 6, years of education is the expected length of each degree, 6 represents the e
> xpected age in the first year of school
. gen SCHOOLYRS = .
(418,840 missing values generated)

. replace SCHOOLYRS = 11 if HDGREE == 1
(46,810 real changes made)

. replace SCHOOLYRS = 12 if HDGREE == 2
(107,210 real changes made)

. replace SCHOOLYRS = 16 if HDGREE == 3 | HDGREE == 4 |HDGREE == 9
(116,639 real changes made)

. replace SCHOOLYRS = 13 if HDGREE == 5
(10,363 real changes made)

. replace SCHOOLYRS = 14 if HDGREE == 6 | HDGREE == 7 | HDGREE == 8
(99,099 real changes made)

. replace SCHOOLYRS = 17 if HDGREE == 10
(10,873 real changes made)

. replace SCHOOLYRS = 21 if HDGREE == 11 | HDGREE == 13
(4,840 real changes made)

. replace SCHOOLYRS = 18 if HDGREE == 12
(20,761 real changes made)

. gen POTENEXP = AGE - SCHOOLYRS - 6
(2,245 missing values generated)

. label variable POTENEXP "Potential experience"

. *A negative value is most likely to mean that the individual finished the degree faster than expected
. *Drop these negative potential experiences because they don't fit in the context
. drop if POTENEXP <= 0 | POTENEXP == . 
(26,110 observations deleted)

. 
. *Create a quadratic term
. gen POTENEXP_2 = POTENEXP^2

. label variable POTENEXP_2 "Potential experience^2"

. *Create interactions
. gen FEM_POTENEXP = FEMALE*POTENEXP

. label variable FEM_POTENEXP "Female*Potential experience"

. gen FEM_POTENEXP_2 = FEMALE*POTENEXP_2

. label variable FEM_POTENEXP_2 "Female*Potential experience^2"

. *************************************************
. 
. 
. ****************************************
. *Dummies for having children
. 
. *Drop unavailable data from PKID's
. label list PKID6_14
PKID6_14:
           1 None
           2 One or more
           3 Not available
           4 Not applicable

. drop if PKID6_14 == 3 | PKID6_14 == . | PKID6_14 == 4
(73,789 observations deleted)

. label list PKID2_5
PKID2_5:
           1 None
           2 One or more
           3 Not available
           4 Not applicable

. drop if PKID2_5 == 3 | PKID2_5 == . | PKID2_5 == 4
(0 observations deleted)

. label list PKID0_1
PKID0_1:
           1 None
           2 One or more
           3 Not available
           4 Not applicable

. drop if PKID0_1 == 3 | PKID0_1 == . | PKID0_1 == 4
(0 observations deleted)

. label list PKID15_24
PKID15_24:
           1 None
           2 One or more
           3 Not available
           4 Not applicable

. drop if PKID15_24 == 3 | PKID15_24 == . | PKID15_24 == 4
(0 observations deleted)

. *Create a dummy for each type of children one has
. gen INFANT = 0

. replace INFANT = 1 if PKID0_1 == 2
(23,895 real changes made)

. gen PRESCHOOLER = 0

. replace PRESCHOOLER = 1 if PKID2_5 == 2
(41,265 real changes made)

. gen SCHOOLAGE = 0

. replace SCHOOLAGE = 1 if PKID6_14 == 2
(80,303 real changes made)

. gen YOUTH = 0

. replace YOUTH = 1 if PKID15_24 == 2
(112,899 real changes made)

. *Create labels
. label define childlab 0 "None" 1 "One or more"

. label values INFANT childlab

. label values PRESCHOOLER childlab

. label values SCHOOLAGE childlab

. label values YOUTH childlab

. label variable INFANT "Infant"

. label variable PRESCHOOLER "preschooler"

. label variable SCHOOLAGE "school-age children"

. label variable YOUTH "Youth-age children" 

. *Interact with gender
. gen FEM_INFANT = FEMALE*INFANT

. label variable FEM_INFANT "Female*Infant"

. gen FEM_PRESCHOOLER = FEMALE*PRESCHOOLER

. label variable FEM_PRESCHOOLER "Female*Preschooler"

. gen FEM_SCHOOLAGE = FEMALE*SCHOOLAGE

. label variable FEM_SCHOOLAGE "Female*Schoolage"

. gen FEM_YOUTH = FEMALE*YOUTH

. label variable FEM_YOUTH "Female*Youth"

. *******************************************
. 
. *drop unavailable data
. label list HDGREE
HDGREE:
           1 No certificate, diploma or degree
           2 High school diploma or equivalent
           3 Trades certificate or diploma (other than apprenticeship)
           4 Registered Apprenticeship certificate
           5 College,CEGEPorothernon-universitycertificatordiplomfromaprgrmof3mnthstlssthn1yr
           6 College,CEGEPorothernon-universitycertificateordiplomafromaprogramof1yeart2years
           7 College,CEGEPorothernon-universitycertificateordiplomfromaprogramofmorthan2years
           8 University certificate or diploma below bachelor level
           9 Bachelor's degree
          10 University certificate or diploma above bachelor level
          11 Degree in medicine, dentistry, veterinary medicine or optometry
          12 Master's degree
          13 Earned doctorate degree
          14 Not available
          15 Not applicable (< 15 years)

. drop if HDGREE == 14 | HDGREE == 15 | HDGREE == .
(0 observations deleted)

. 
. *NAICS
. *drop unavailable observations
. label list NAICS
NAICS:
           1 11 Agriculture, forestry, fishing and hunting
           2 21 Mining, quarrying, and oil and gas extraction
           3 22 Utilities
           4 23 Construction
           5 31-33 Manufacturing
           6 41 Wholesale trade
           7 44-45 Retail trade
           8 48-49 Transportation and warehousing
           9 51 Information and cultural industries
          10 52 Finance and insurance/55 Management of companies and enterprises
          11 53 Real estate and rental and leasing
          12 54 Professional, scientific and technical services
          13 56 Administrative and support, waste management and remediation services
          14 61 Educational services
          15 62 Health care and social assistance
          16 71 Arts, entertainment and recreation
          17 72 Accommodation and food services
          18 81 Other services (except public administration)
          19 Not available
          20 91 Public administration
          21 Not applicable

. drop if NAICS == 19 | NAICS == 21 | NAICS == .
(3,570 observations deleted)

. 
. *PR
. drop if PR == .
(0 observations deleted)

. 
. *WKSWRK
. *Drop those who have never worked in 2010 and are under legal working age.
. drop if WKSWRK == 8 | WKSWRK == . | WKSWRK == 1
(3,130 observations deleted)

. *Take the rounded median of each category to make a numercial variable for length of work
. gen WEEKWRK = 5

. replace WEEKWRK = 15 if WKSWRK == 3
(17,444 real changes made)

. replace WEEKWRK = 25 if WKSWRK == 4
(20,335 real changes made)

. replace WEEKWRK = 35 if WKSWRK == 5
(17,238 real changes made)

. replace WEEKWRK = 44 if WKSWRK == 6
(47,506 real changes made)

. replace WEEKWRK = 51 if WKSWRK == 7
(199,450 real changes made)

. label variable WEEKWRK "weeks worked in 2010"

. 
. *MARSTH
. *Create a dummy for marital status
. drop if MARSTH == .
(0 observations deleted)

. gen MARRIED = 0

. replace MARRIED = 1 if MARSTH == 2 | MARSTH == 4
(189,081 real changes made)

. label variable MARRIED "Married"

. label define MARRIEDlab 0 "not married" 1 "married"

. label values MARRIED MARRIEDlab

. *Interact with gender
. gen FEM_MAR = FEMALE*MARRIED

. label variable FEM_MAR "Female*Married"

. 
. *Visible minority
. *get rid off unavailable data
. drop if VISMIN == . | VISMIN == 14
(1,331 observations deleted)

. *create a dummy for visible minority
. gen MINORITY = 1

. replace MINORITY = 0 if VISMIN == 13
(254,814 real changes made)

. label define minlab 1 "Visible minority" 0 "Not a visible minority"

. label values MINORITY minlab

. label variable MINORITY "Minority"

. *Interacts with gender
. gen FEM_MIN = FEMALE*MINORITY

. label variable FEM_MIN "Female*Minority"

. 
. *Descriptive statistics      
. estpost tabstat lnWAGES FEMALE FEM_POTENEXP FEM_POTENEXP_2 FEM_MAR FEM_INFANT FEM_PRESCHOOLER FEM_SCHOOLAGE FEM_YOUTH FEM_MIN INFA
> NT PRESCHOOLER SCHOOLAGE YOUTH MARRIED POTENEXP POTENEXP_2 NAIC HDGREE PR WEEKWRK MINORITY, listwise statistics(mean sd count min 
> max) columns(statistics)

Summary statistics: mean sd count min max
     for variables: lnWAGES FEMALE FEM_POTENEXP FEM_POTENEXP_2 FEM_MAR FEM_INFANT FEM_PRESCHOOLER FEM_SCHOOLAGE FEM_YOUTH FEM_MIN IN
> FANT PRESCHOOLER SCHOOLAGE YOUTH MARRIED POTENEXP POTENEXP_2 NAICS HDGREE PR WEEKWRK MINORITY

             |   e(mean)      e(sd)   e(count)     e(min)     e(max) 
-------------+-------------------------------------------------------
     lnWAGES |  10.35629   1.042104     310910   6.907755   13.88727 
      FEMALE |  .4995819   .5000006     310910          0          1 
FEM_POTENEXP |   10.5521   13.83402     310910          0         68 
FEM_POTENE~2 |  302.7262   508.4049     310910          0       4624 
     FEM_MAR |  .2985462   .4576211     310910          0          1 
  FEM_INFANT |   .033849   .1808407     310910          0          1 
FEM_PRESCH~R |  .0608697   .2390915     310910          0          1 
FEM_SCHOOL~E |   .128111   .3342139     310910          0          1 
   FEM_YOUTH |  .1806536   .3847315     310910          0          1 
     FEM_MIN |  .0902962   .2866061     310910          0          1 
      INFANT |  .0741887   .2620781     310910          0          1 
 PRESCHOOLER |  .1287993   .3349782     310910          0          1 
   SCHOOLAGE |  .2510855   .4336383     310910          0          1 
       YOUTH |  .3538387   .4781607     310910          0          1 
     MARRIED |  .6053327   .4887799     310910          0          1 
    POTENEXP |  21.41642    12.8719     310910          1         68 
  POTENEXP_2 |  624.3481   601.8549     310910          1       4624 
       NAICS |   11.0134   5.246094     310910          1         20 
      HDGREE |  5.324197    3.39642     310910          1         13 
          PR |  6.475839   2.000379     310910          1         11 
     WEEKWRK |  43.83648   12.50018     310910          5         51 
    MINORITY |  .1804252   .3845418     310910          0          1 

. esttab . using "sumst_int.rtf", replace cells("mean(fmt(a3)) sd count min max") title(Table 1) label noobs
(output written to sumst_int.rtf)

. 
. *Fit a regression model
. reg lnWAGES FEMALE FEM_POTENEXP FEM_POTENEXP_2 FEM_MAR FEM_INFANT FEM_PRESCHOOLER FEM_SCHOOLAGE FEM_YOUTH FEM_MIN INFANT PRESCHOOL
> ER SCHOOLAGE YOUTH MARRIED POTENEXP POTENEXP_2 i.NAIC i.HDGREE i.PR WEEKWRK MINORITY

      Source |       SS           df       MS      Number of obs   =   310,910
-------------+----------------------------------   F(58, 310851)   =   5894.45
       Model |  176845.522        58  3049.06073   Prob > F        =    0.0000
    Residual |  160795.805   310,851   .51727614   R-squared       =    0.5238
-------------+----------------------------------   Adj R-squared   =    0.5237
       Total |  337641.328   310,909   1.0859812   Root MSE        =    .71922

-----------------------------------------------------------------------------------------------------------------------------------
                                                          lnWAGES |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
------------------------------------------------------------------+----------------------------------------------------------------
                                                           FEMALE |  -.0933706   .0081315   -11.48   0.000    -.1093082    -.077433
                                                     FEM_POTENEXP |  -.0087624    .000788   -11.12   0.000    -.0103069   -.0072179
                                                   FEM_POTENEXP_2 |   .0001121   .0000166     6.75   0.000     .0000796    .0001447
                                                          FEM_MAR |  -.1090988   .0062863   -17.35   0.000    -.1214198   -.0967777
                                                       FEM_INFANT |  -.1145208   .0106786   -10.72   0.000    -.1354505    -.093591
                                                  FEM_PRESCHOOLER |  -.0877119   .0084965   -10.32   0.000    -.1043649    -.071059
                                                    FEM_SCHOOLAGE |  -.0917415   .0064436   -14.24   0.000    -.1043707   -.0791123
                                                        FEM_YOUTH |  -.0431833   .0057341    -7.53   0.000     -.054422   -.0319446
                                                          FEM_MIN |   .1402862   .0068117    20.59   0.000     .1269355     .153637
                                                           INFANT |   .0733193    .007241    10.13   0.000     .0591271    .0875114
                                                      PRESCHOOLER |   .0606132   .0059057    10.26   0.000     .0490381    .0721882
                                                        SCHOOLAGE |   .0051945    .004571     1.14   0.256    -.0037646    .0141535
                                                            YOUTH |  -.0289928   .0041149    -7.05   0.000    -.0370579   -.0209276
                                                          MARRIED |   .1150959     .00471    24.44   0.000     .1058644    .1243274
                                                         POTENEXP |   .0672833   .0005643   119.23   0.000     .0661773    .0683893
                                                       POTENEXP_2 |  -.0011672   .0000115  -101.53   0.000    -.0011897   -.0011446
                                                                  |
                                                            NAICS |
                21 Mining, quarrying, and oil and gas extraction  |   .7648709   .0154714    49.44   0.000     .7345475    .7951944
                                                    22 Utilities  |   .6041426   .0171572    35.21   0.000     .5705151    .6377702
                                                 23 Construction  |     .27478   .0123596    22.23   0.000     .2505556    .2990044
                                             31-33 Manufacturing  |   .2468456   .0117939    20.93   0.000     .2237299    .2699613
                                              41 Wholesale trade  |   .2704848   .0126354    21.41   0.000     .2457198    .2952499
                                              44-45 Retail trade  |  -.1247943   .0117148   -10.65   0.000    -.1477549   -.1018336
                            48-49 Transportation and warehousing  |   .1745869    .012572    13.89   0.000     .1499461    .1992276
                          51 Information and cultural industries  |   .2911265   .0139463    20.87   0.000     .2637922    .3184609
52 Finance and insurance/55 Management of companies and enterp..  |   .3886909   .0126061    30.83   0.000     .3639833    .4133985
                           53 Real estate and rental and leasing  |   .0706738   .0154728     4.57   0.000     .0403475    .1010001
              54 Professional, scientific and technical services  |   .2891943    .012372    23.37   0.000     .2649454    .3134431
56 Administrative and support, waste management and remediatio..  |  -.0682173   .0130224    -5.24   0.000    -.0937408   -.0426939
                                         61 Educational services  |   .1014349   .0121268     8.36   0.000     .0776667    .1252032
                            62 Health care and social assistance  |   .1621586   .0118802    13.65   0.000     .1388739    .1854434
                           71 Arts, entertainment and recreation  |  -.1225579   .0147526    -8.31   0.000    -.1514727   -.0936432
                              72 Accommodation and food services  |  -.2690777   .0123519   -21.78   0.000     -.293287   -.2448684
                81 Other services (except public administration)  |  -.0459334   .0129622    -3.54   0.000    -.0713389   -.0205279
                                        91 Public administration  |   .3543269   .0119918    29.55   0.000     .3308233    .3778304
                                                                  |
                                                           HDGREE |
                               High school diploma or equivalent  |   .1014027   .0049499    20.49   0.000      .091701    .1111044
       Trades certificate or diploma (other than apprenticeship)  |   .1613029   .0068218    23.65   0.000     .1479322    .1746735
                           Registered Apprenticeship certificate  |   .2923592   .0076263    38.34   0.000     .2774118    .3073066
College,CEGEPorothernon-universitycertificatordiplomfromaprgrm..  |   .1728813   .0092316    18.73   0.000     .1547876     .190975
College,CEGEPorothernon-universitycertificateordiplomafromapro..  |   .2572012   .0059373    43.32   0.000     .2455643    .2688381
College,CEGEPorothernon-universitycertificateordiplomfromaprog..  |   .3654005   .0061527    59.39   0.000     .3533413    .3774596
          University certificate or diploma below bachelor level  |   .3865482   .0073132    52.86   0.000     .3722145     .400882
                                               Bachelor's degree  |   .5806775   .0056935   101.99   0.000     .5695184    .5918366
          University certificate or diploma above bachelor level  |   .6317939   .0092783    68.09   0.000     .6136088     .649979
 Degree in medicine, dentistry, veterinary medicine or optometry  |    .867314   .0233433    37.15   0.000     .8215617    .9130663
                                                 Master's degree  |   .6898362   .0074724    92.32   0.000     .6751905    .7044818
                                         Earned doctorate degree  |   .8563526   .0152086    56.31   0.000     .8265441     .886161
                                                                  |
                                                               PR |
                                            Prince Edward Island  |  -.0384446   .0223881    -1.72   0.086    -.0823246    .0054355
                                                     Nova Scotia  |  -.0497862   .0130073    -3.83   0.000    -.0752801   -.0242923
                                                   New Brunswick  |   -.040167   .0134303    -2.99   0.003    -.0664899   -.0138441
                                                          Quebec  |  -.0092223   .0107397    -0.86   0.390    -.0302717    .0118271
                                                         Ontario  |    .080797   .0106061     7.62   0.000     .0600092    .1015847
                                                        Manitoba  |   .0120553   .0125058     0.96   0.335    -.0124558    .0365664
                                                    Saskatchewan  |     .09725   .0129761     7.49   0.000     .0718173    .1226828
                                                         Alberta  |   .2047354   .0110818    18.47   0.000     .1830154    .2264554
                                                British Columbia  |   .0730568   .0110241     6.63   0.000     .0514499    .0946637
                                                 Northern Canada  |   .2663938   .0293597     9.07   0.000     .2088495     .323938
                                                                  |
                                                          WEEKWRK |   .0345898   .0001101   314.31   0.000     .0343741    .0348055
                                                         MINORITY |  -.2698024   .0049415   -54.60   0.000    -.2794875   -.2601173
                                                            _cons |   7.755201   .0165424   468.81   0.000     7.722778    7.787623
-----------------------------------------------------------------------------------------------------------------------------------

. estimates store model_int

. 
. *Robustness check
. eststo clear

. estpost tabstat lnWAGES FEMALE FEM_AGE FEM_AGE_2 FEM_MAR FEM_INFANT FEM_PRESCHOOLER FEM_SCHOOLAGE FEM_YOUTH FEM_MIN INFANT PRESCHO
> OLER SCHOOLAGE YOUTH MARRIED AGE AGE_2 NAIC HDGREE PR WEEKWRK MINORITY, listwise statistics(mean sd count min max) columns(statist
> ics)

Summary statistics: mean sd count min max
     for variables: lnWAGES FEMALE FEM_AGE FEM_AGE_2 FEM_MAR FEM_INFANT FEM_PRESCHOOLER FEM_SCHOOLAGE FEM_YOUTH FEM_MIN INFANT PRESC
> HOOLER SCHOOLAGE YOUTH MARRIED AGE AGE_2 NAICS HDGREE PR WEEKWRK MINORITY

             |   e(mean)      e(sd)   e(count)     e(min)     e(max) 
-------------+-------------------------------------------------------
     lnWAGES |  10.35629   1.042104     310910   6.907755   13.88727 
      FEMALE |  .4995819   .5000006     310910          0          1 
     FEM_AGE |  20.56497   22.41936     310910          0         85 
   FEM_AGE_2 |   925.544   1186.383     310910          0       7225 
     FEM_MAR |  .2985462   .4576211     310910          0          1 
  FEM_INFANT |   .033849   .1808407     310910          0          1 
FEM_PRESCH~R |  .0608697   .2390915     310910          0          1 
FEM_SCHOOL~E |   .128111   .3342139     310910          0          1 
   FEM_YOUTH |  .1806536   .3847315     310910          0          1 
     FEM_MIN |  .0902962   .2866061     310910          0          1 
      INFANT |  .0741887   .2620781     310910          0          1 
 PRESCHOOLER |  .1287993   .3349782     310910          0          1 
   SCHOOLAGE |  .2510855   .4336383     310910          0          1 
       YOUTH |  .3538387   .4781607     310910          0          1 
     MARRIED |  .6053327   .4887799     310910          0          1 
         AGE |  41.47141   12.93283     310910         19         85 
       AGE_2 |  1887.135   1092.633     310910        361       7225 
       NAICS |   11.0134   5.246094     310910          1         20 
      HDGREE |  5.324197    3.39642     310910          1         13 
          PR |  6.475839   2.000379     310910          1         11 
     WEEKWRK |  43.83648   12.50018     310910          5         51 
    MINORITY |  .1804252   .3845418     310910          0          1 

. esttab using "sumst_rob.rtf", replace cells("mean(fmt(a3)) sd count min max") title(Table 2) label noobs
(output written to sumst_rob.rtf)

. 
. reg lnWAGES FEMALE FEM_AGE FEM_AGE_2 FEM_MAR FEM_INFANT FEM_PRESCHOOLER FEM_SCHOOLAGE FEM_YOUTH FEM_MIN INFANT PRESCHOOLER SCHOOLA
> GE YOUTH MARRIED AGE AGE_2 i.NAIC i.HDGREE i.PR WEEKWRK MINORITY

      Source |       SS           df       MS      Number of obs   =   310,910
-------------+----------------------------------   F(58, 310851)   =   5934.75
       Model |  177419.166        58  3058.95115   Prob > F        =    0.0000
    Residual |  160222.161   310,851   .51543074   R-squared       =    0.5255
-------------+----------------------------------   Adj R-squared   =    0.5254
       Total |  337641.328   310,909   1.0859812   Root MSE        =    .71794

-----------------------------------------------------------------------------------------------------------------------------------
                                                          lnWAGES |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
------------------------------------------------------------------+----------------------------------------------------------------
                                                           FEMALE |   .0775194   .0265901     2.92   0.004     .0254037    .1296352
                                                          FEM_AGE |  -.0119994   .0013716    -8.75   0.000    -.0146877   -.0093111
                                                        FEM_AGE_2 |    .000106   .0000161     6.57   0.000     .0000744    .0001375
                                                          FEM_MAR |  -.1156913   .0063516   -18.21   0.000    -.1281402   -.1032424
                                                       FEM_INFANT |  -.1096717   .0106572   -10.29   0.000    -.1305595   -.0887839
                                                  FEM_PRESCHOOLER |  -.0799285   .0084836    -9.42   0.000    -.0965561   -.0633008
                                                    FEM_SCHOOLAGE |  -.0852318   .0064109   -13.29   0.000     -.097797   -.0726665
                                                        FEM_YOUTH |  -.0466165   .0057483    -8.11   0.000     -.057883   -.0353499
                                                          FEM_MIN |   .1442629   .0067932    21.24   0.000     .1309484    .1575773
                                                           INFANT |   .0595484   .0072298     8.24   0.000     .0453782    .0737186
                                                      PRESCHOOLER |   .0526259   .0058976     8.92   0.000     .0410668     .064185
                                                        SCHOOLAGE |   .0038242   .0045529     0.84   0.401    -.0050993    .0127477
                                                            YOUTH |  -.0016648   .0041289    -0.40   0.687    -.0097573    .0064277
                                                          MARRIED |   .1081325   .0047421    22.80   0.000     .0988381    .1174269
                                                              AGE |   .1135042   .0009692   117.11   0.000     .1116045    .1154038
                                                            AGE_2 |  -.0011748   .0000111  -105.66   0.000    -.0011966    -.001153
                                                                  |
                                                            NAICS |
                21 Mining, quarrying, and oil and gas extraction  |    .766562   .0154431    49.64   0.000      .736294    .7968301
                                                    22 Utilities  |   .6094724   .0171257    35.59   0.000     .5759066    .6430382
                                                 23 Construction  |   .2779507   .0123372    22.53   0.000     .2537703    .3021312
                                             31-33 Manufacturing  |   .2484659   .0117723    21.11   0.000     .2253926    .2715392
                                              41 Wholesale trade  |    .272972   .0126125    21.64   0.000     .2482519    .2976921
                                              44-45 Retail trade  |  -.1110566   .0116962    -9.50   0.000    -.1339807   -.0881324
                            48-49 Transportation and warehousing  |   .1745206   .0125495    13.91   0.000     .1499239    .1991173
                          51 Information and cultural industries  |   .2953849   .0139204    21.22   0.000     .2681014    .3226684
52 Finance and insurance/55 Management of companies and enterp..  |   .3910474   .0125825    31.08   0.000      .366386    .4157087
                           53 Real estate and rental and leasing  |   .0768465   .0154458     4.98   0.000     .0465733    .1071197
              54 Professional, scientific and technical services  |   .2885425   .0123492    23.37   0.000     .2643385    .3127465
56 Administrative and support, waste management and remediatio..  |  -.0614542   .0129993    -4.73   0.000    -.0869324    -.035976
                                         61 Educational services  |    .110447   .0121053     9.12   0.000      .086721     .134173
                            62 Health care and social assistance  |   .1692483   .0118589    14.27   0.000     .1460053    .1924914
                           71 Arts, entertainment and recreation  |   -.111716   .0147281    -7.59   0.000    -.1405827   -.0828493
                              72 Accommodation and food services  |  -.2480142   .0123345   -20.11   0.000    -.2721895   -.2238388
                81 Other services (except public administration)  |  -.0375791   .0129393    -2.90   0.004    -.0629398   -.0122184
                                        91 Public administration  |   .3603491   .0119695    30.11   0.000     .3368892     .383809
                                                                  |
                                                           HDGREE |
                               High school diploma or equivalent  |   .1081953   .0049271    21.96   0.000     .0985384    .1178522
       Trades certificate or diploma (other than apprenticeship)  |   .1220775    .006766    18.04   0.000     .1088163    .1353386
                           Registered Apprenticeship certificate  |   .2538035   .0075787    33.49   0.000     .2389495    .2686575
College,CEGEPorothernon-universitycertificatordiplomfromaprgrm..  |   .1604967   .0092012    17.44   0.000     .1424627    .1785307
College,CEGEPorothernon-universitycertificateordiplomafromapro..  |   .2333542   .0058814    39.68   0.000     .2218269    .2448815
College,CEGEPorothernon-universitycertificateordiplomfromaprog..  |   .3436657   .0060997    56.34   0.000     .3317104    .3556209
          University certificate or diploma below bachelor level  |   .3663249   .0072736    50.36   0.000     .3520688     .380581
                                               Bachelor's degree  |   .5294973   .0055952    94.63   0.000     .5185308    .5404638
          University certificate or diploma above bachelor level  |   .5698843   .0091984    61.95   0.000     .5518557    .5879129
 Degree in medicine, dentistry, veterinary medicine or optometry  |    .768572   .0232631    33.04   0.000      .722977    .8141669
                                                 Master's degree  |   .6160664   .0073703    83.59   0.000     .6016208     .630512
                                         Earned doctorate degree  |   .7867709   .0151296    52.00   0.000     .7571173    .8164245
                                                                  |
                                                               PR |
                                            Prince Edward Island  |  -.0336861   .0223485    -1.51   0.132    -.0774885    .0101163
                                                     Nova Scotia  |  -.0434156   .0129847    -3.34   0.001    -.0688653    -.017966
                                                   New Brunswick  |  -.0375715   .0134064    -2.80   0.005    -.0638477   -.0112954
                                                          Quebec  |  -.0115141   .0107202    -1.07   0.283    -.0325254    .0094972
                                                         Ontario  |    .085126   .0105879     8.04   0.000     .0643741     .105878
                                                        Manitoba  |   .0199304   .0124848     1.60   0.110    -.0045394    .0444002
                                                    Saskatchewan  |   .1042533    .012954     8.05   0.000     .0788638    .1296427
                                                         Alberta  |   .2130955   .0110633    19.26   0.000     .1914117    .2347792
                                                British Columbia  |   .0794846   .0110052     7.22   0.000     .0579146    .1010545
                                                 Northern Canada  |   .2818436   .0293078     9.62   0.000     .2244012    .3392861
                                                                  |
                                                          WEEKWRK |   .0341748   .0001103   309.71   0.000     .0339586    .0343911
                                                         MINORITY |  -.2786049   .0049308   -56.50   0.000     -.288269   -.2689407
                                                            _cons |   6.012281   .0240784   249.70   0.000     5.965088    6.059474
-----------------------------------------------------------------------------------------------------------------------------------

. estimates store model_rob

. 
. *Produce a aggregated table for regression outputs
. esttab model_int model_rob using "regout.rtf", replace label compress order(FEMALE FEM_POTENEXP FEM_POTENEXP_2 FEM_AGE FEM_AGE_2 F
> EM_MAR FEM_INFANT FEM_PRESCHOOLER FEM_SCHOOLAGE FEM_YOUTH FEM_MIN FEM_MAR FEM_INFANT FEM_PRESCHOOLER FEM_SCHOOLAGE FEM_YOUTH FEM_M
> IN YOUTH MARRIED POTENEXP POTENEXP_2 AGE AGE_2 MINORITY) b(3) title(Table 3) varwidth(40)
(output written to regout.rtf)

. 
. 
. log close
      name:  <unnamed>
       log:  /Users/jensenxu/Desktop/stata_clone/Model.log
  log type:  text
 closed on:  29 Nov 2019, 12:24:51
------------------------------------------------------------------------------------------------------------------------------------
